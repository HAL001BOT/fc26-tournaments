<!doctype html>
<html>
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Admin Users - FC26 Tracker</title>
  <link rel="stylesheet" href="/style.css?v=3" />
</head>
<body>
  <header class="topbar">
    <h1>User Management</h1>
    <a href="/dashboard">â† Dashboard</a>
  </header>

  <section class="card">
    <h2>Create User</h2>
    <form method="post" action="/admin/users/create" class="inline" style="gap:10px;flex-wrap:wrap;">
      <input name="username" placeholder="username" required />
      <input name="password" placeholder="password" required />
      <select name="role">
        <option value="user">user</option>
        <option value="admin">admin</option>
      </select>
      <label><input type="checkbox" name="must_change_password" checked /> must change password</label>
      <button type="submit">Create</button>
    </form>
  </section>

  <section class="card">
    <h2>Roles</h2>
    <table>
      <thead>
        <tr><th>User</th><th>Role</th><th>Must Change Password</th><th>Action</th></tr>
      </thead>
      <tbody>
        <% users.forEach(u => { %>
          <tr>
            <td><%= u.username %></td>
            <td><strong><%= u.role || 'user' %></strong></td>
            <td><%= u.must_change_password ? 'Yes' : 'No' %></td>
            <td>
              <form method="post" action="/admin/users/<%= u.id %>/role" class="inline">
                <select name="role">
                  <option value="user" <%= (u.role || 'user') === 'user' ? 'selected' : '' %>>user</option>
                  <option value="admin" <%= (u.role || 'user') === 'admin' ? 'selected' : '' %>>admin</option>
                </select>
                <button type="submit">Save</button>
              </form>
            </td>
          </tr>
        <% }) %>
      </tbody>
    </table>
  </section>
</body>
</html>
